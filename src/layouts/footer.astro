---
// src/layouts/footer.astro

// R√©cup√©rer l'URL actuelle pour d√©tecter la langue
const { pathname } = Astro.url;

// D√©tecter la langue actuelle depuis l'URL
const langMatch = pathname.match(/^\/([a-z]{2})(\/|$)/);
const currentLang = langMatch ? langMatch[1] : "fr";

const currentYear = new Date().getFullYear();

// Traductions pour le footer
const footerContent = {
  fr: {
    copyright: `¬© ${currentYear} ABC Gourmet - Conseil en Agroalimentaire`,
    description: "Expertise strat√©gique et accompagnement op√©rationnel dans le secteur alimentaire",
    legalNotice: "Mentions l√©gales",
    privacy: "Confidentialit√©"
  },
  en: {
    copyright: `¬© ${currentYear} ABC Gourmet - Food Industry Consulting`,
    description: "Strategic expertise and operational support in the food sector",
    legalNotice: "Legal notice",
    privacy: "Privacy"
  },
  de: {
    copyright: `¬© ${currentYear} ABC Gourmet - Beratung f√ºr die Lebensmittelindustrie`,
    description: "Strategische Expertise und operative Unterst√ºtzung im Lebensmittelsektor",
    legalNotice: "Impressum",
    privacy: "Datenschutz"
  }
};

// Utiliser la langue courante ou le fran√ßais par d√©faut
const t = footerContent[currentLang as keyof typeof footerContent] || footerContent.fr;

// Navigation du footer
const footerNavLabels = {
  fr: {
    contact: 'Contact'
  },
  en: {
    contact: 'Contact'
  },
  de: {
    contact: 'Kontakt'
  }
};

const navLabels = footerNavLabels[currentLang as keyof typeof footerNavLabels] || footerNavLabels.fr;
---

<footer class="bg-(--color-gray-50) border-t border-gray-200 mt-16 py-2">
  <div class="container mx-auto px-4 py-8">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      
      <!-- Informations entreprise -->
      <div>
        <h3 class="text-xl font-bold text-(--color-primary) mb-4">ABC Gourmet</h3>
        <p class="text-(--color-gray-600) mb-4">{t.description}</p>
        <p class="text-sm text-(--color-gray-600)">{t.copyright}</p>
      </div>
      
      <!-- Contact info -->
      <div>
        <h4 class="font-semibold text-(--color-gray-900) mb-4">{navLabels.contact}</h4>
        <div class="space-y-2 text-(--color-gray-600)">
          <p>üìß contact@abc-gourmet.fr</p>
          <p>üìû +33 X XX XX XX XX</p>
          <p>üìç France</p>
        </div>
      </div>
    </div>
    
    <!-- Liens l√©gaux -->
    <div class="border-t border-gray-200 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center">
      <div class="flex gap-4 text-sm text-(--color-gray-600)">
        <a href={`/${currentLang}/legal/`} class="hover:text-(--color-primary) transition-colors">
          {t.legalNotice}
        </a>
        <a href={`/${currentLang}/privacy/`} class="hover:text-(--color-primary) transition-colors">
          {t.privacy}
        </a>
      </div>
    </div>
  </div>
</footer>