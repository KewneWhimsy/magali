---
// src/components/hero.astro - Version KISS avec Tailwind
import OptimizeImage from './optimize_image.astro';

interface Props {
  variant?: 'overlay' | 'blend' | 'gradient' | 'texture' | 'none';
  lang: string;
  title: string;
  buttonText: string;
  buttonHref: string;
}

const { variant = 'overlay', lang, title, buttonText, buttonHref } = Astro.props;
---

<section class="relative min-h-[600px] lg:min-h-[700px] flex items-center justify-center overflow-hidden">
  <!-- Image de fond -->
  <div class="absolute inset-0 z-0">
    <OptimizeImage 
      src="/src/assets/img/diner_2432_1664.jpg"
      alt="ABC Gourmet - Textures alimentaires"
      class="w-full h-full object-cover"
      loading="eager"
      widths={[800, 1200, 1600, 2000]}
      sizes="100vw"
    />
    
    <!-- Variant 1: Superposition classique avec dégradé -->
    {variant === 'overlay' && (
      <div class="absolute inset-0 bg-gradient-to-r from-[var(--color-primary)] via-[var(--color-primary-hover)] to-[var(--color-secondary)] opacity-85"></div>
    )}
    
    <!-- Variant 2: Mode de fusion (blend mode) -->
    {variant === 'blend' && (
      <div class="absolute inset-0 bg-[var(--color-primary)] mix-blend-multiply opacity-70"></div>
    )}
    
    <!-- Variant 3: Dégradé complexe avec zones de transparence -->
    {variant === 'gradient' && (
      <>
        <div class="absolute inset-0 bg-gradient-to-br from-[var(--color-primary)]/90 via-[var(--color-primary-hover)]/60 to-transparent"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-black/30"></div>
      </>
    )}
    
    <!-- Variant 4: Effet de texture avec motif -->
    {variant === 'texture' && (
      <>
        <div class="absolute inset-0 bg-[var(--color-primary)] opacity-75"></div>
        <div class="absolute inset-0 bg-gradient-to-br from-transparent via-black/20 to-[var(--color-secondary)]/30"></div>
        <div class="absolute inset-0" style="background-image: radial-gradient(circle at 20% 50%, transparent 40%, rgba(255,255,255,0.1) 50%);"></div>
      </>
    )}
    
    <!-- Variant 5: Aucun effet - image pure -->
    {variant === 'none' && (
      <!-- Pas de superposition, juste l'image -->
      <div class="absolute inset-0"></div>
    )}
  </div>
  
  <!-- Contenu principal -->
  <div class={`relative z-10 max-w-6xl mx-auto px-4 mb-40 text-center ${variant === 'none' ? 'text-white' : 'text-white'}`}>
    <!-- Logo avec bordure blanche simple -->
    <div class="mb-8 flex justify-center">
      <div class="bg-white p-6 md:p-8 border-4 border-white rounded-b-lg shadow-lg">
        <OptimizeImage 
          src="/src/assets/img/logow_300x162.png"
          alt="ABC Gourmet Logo"
          class="h-10 md:h-12 lg:h-14 w-auto"
          loading="eager"
          widths={[150, 200, 300]}
        />
      </div>
    </div>
    
    <h1 class={`text-4xl md:text-6xl lg:text-7xl font-bold my-24 fade-in-up ${variant === 'none' ? 'drop-shadow-2xl drop-shadow-black' : 'drop-shadow-lg'}`}>
      {title}
    </h1>
    <a 
      href={buttonHref}
      class="inline-block bg-white/95 backdrop-blur-sm text-[var(--color-primary)] font-semibold px-8 py-4 text-lg rounded-lg hover:bg-white hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl"
    >
      {buttonText}
    </a>
  </div>
  
  <!-- Indicateur de scroll -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-10">
    <div class="w-6 h-10 border-2 border-white/60 rounded-full flex justify-center">
      <div class="w-1 h-3 bg-white/80 rounded-full mt-2 animate-bounce"></div>
    </div>
  </div>
</section>

<style>
  /* Animation pour l'effet de parallaxe subtil */
  @media (prefers-reduced-motion: no-preference) {
    section {
      animation: subtleParallax 20s ease-in-out infinite;
    }
  }
  
  @keyframes subtleParallax {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  /* Amélioration de la lisibilité du texte pour la variante "none" */
  h1, p {
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  }
  
  /* Effet de hover pour le bouton */
  a:hover {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  }
</style>