---
// src/pages/[lang]/contact.astro
import Layout from "../../layouts/layout.astro";
import OptimizeImage from "../../components/optimize_image.astro";

export function getStaticPaths() {
  return [
    { params: { lang: "fr" } },
    { params: { lang: "en" } },
    { params: { lang: "de" } },
  ];
}

const lang = Astro.params.lang as "fr" | "en" | "de";

const content = {
  fr: {
    title: "Contact - ABC Gourmet",
    description:
      "Contactez ABC Gourmet pour vos projets dans le secteur alimentaire. Conseil stratégique et accompagnement opérationnel.",
    heroTitle: "Envie de rejoindre notre collaboratif ?",
    heroSubtitle: "Contactez-nous !",

    contactInfo: {
      email: "E-mail",
      phone: "Téléphone",
      followUs: "Suivez-nous sur",
    },

    formTitle: "Parlons de votre projet",
    formSubtitle:
      "Décrivez-nous votre projet et nous vous recontacterons rapidement",

    form: {
      name: "Nom *",
      namePlaceholder: "Votre nom",
      email: "E-mail *",
      emailPlaceholder: "votre@email.com",
      company: "Entreprise",
      companyPlaceholder: "Nom de votre entreprise",
      subject: "Sujet *",
      subjectPlaceholder: "Objet de votre demande",
      message: "Message *",
      messagePlaceholder: "Décrivez votre projet ou vos besoins...",
      send: "Envoyer le message",
      required: "* Champs obligatoires",
    },
  },
  en: {
    title: "Contact - ABC Gourmet",
    description:
      "Contact ABC Gourmet for your food sector projects. Strategic consulting and operational support.",
    heroTitle: "Want to join our collaborative?",
    heroSubtitle: "Contact us!",

    contactInfo: {
      email: "E-mail",
      phone: "Phone",
      followUs: "Follow us on",
    },

    formTitle: "Let's talk about your project",
    formSubtitle: "Describe your project and we will contact you back quickly",

    form: {
      name: "Name *",
      namePlaceholder: "Your name",
      email: "E-mail *",
      emailPlaceholder: "your@email.com",
      company: "Company",
      companyPlaceholder: "Your company name",
      subject: "Subject *",
      subjectPlaceholder: "Subject of your request",
      message: "Message *",
      messagePlaceholder: "Describe your project or needs...",
      send: "Send message",
      required: "* Required fields",
    },
  },
  de: {
    title: "Kontakt - ABC Gourmet",
    description:
      "Kontaktieren Sie ABC Gourmet für Ihre Projekte im Lebensmittelsektor. Strategische Beratung und operative Unterstützung.",
    heroTitle: "Möchten Sie sich unserem Kollaborativ anschließen?",
    heroSubtitle: "Kontaktieren Sie uns!",

    contactInfo: {
      email: "E-Mail",
      phone: "Telefon",
      followUs: "Folgen Sie uns auf",
    },

    formTitle: "Lassen Sie uns über Ihr Projekt sprechen",
    formSubtitle:
      "Beschreiben Sie Ihr Projekt und wir werden Sie schnell kontaktieren",

    form: {
      name: "Name *",
      namePlaceholder: "Ihr Name",
      email: "E-Mail *",
      emailPlaceholder: "ihre@email.com",
      company: "Unternehmen",
      companyPlaceholder: "Name Ihres Unternehmens",
      subject: "Betreff *",
      subjectPlaceholder: "Betreff Ihrer Anfrage",
      message: "Nachricht *",
      messagePlaceholder:
        "Beschreiben Sie Ihr Projekt oder Ihre Bedürfnisse...",
      send: "Nachricht senden",
      required: "* Pflichtfelder",
    },
  },
};

const t = content[lang] || content.fr;
---

<Layout title={t.title} description={t.description} lang={lang}>
  <!-- Hero Section avec image de Magali -->
  <section
    class="relative min-h-[500px] flex items-center justify-center overflow-hidden"
  >
    <!-- Image de fond -->
    <div
      class="absolute inset-0 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-secondary)]"
    >
    </div>

    <div class="relative z-10 max-w-6xl mx-auto px-4 py-16">
      <div class="flex flex-col lg:flex-row items-center gap-12">
        <!-- Contenu texte -->
        <div class="flex-1 text-center lg:text-left text-white">
          <h1 class="text-4xl md:text-5xl font-bold mb-6 drop-shadow-lg">
            {t.heroTitle}
          </h1>
          <h2 class="text-2xl md:text-3xl font-light drop-shadow-md">
            {t.heroSubtitle}
          </h2>
        </div>

        <!-- Photo de Magali -->
        <div class="flex-shrink-0">
          <div
            class="w-48 h-48 md:w-64 md:h-64 rounded-full overflow-hidden border-4 border-white shadow-xl"
          >
            <OptimizeImage
              src="/src/assets/img/magali_portrait.jpg"
              alt="Magali Caignec - ABC Gourmet"
              class="w-full h-full object-cover"
              loading="eager"
              widths={[256, 384, 512]}
              sizes="(max-width: 768px) 192px, 256px"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Info & Form Section -->
  <section class="py-16 bg-white">
    <div class="max-w-6xl mx-auto px-4">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <!-- Informations de contact -->
        <div>
          <h2 class="text-3xl font-bold mb-8 text-[var(--color-primary)]">
            {t.contactInfo.email}
          </h2>

          <div class="space-y-6">
            <!-- Email -->
            <div class="flex items-center gap-4">
              <div
                class="w-12 h-12 bg-[var(--color-primary)] rounded-full flex items-center justify-center"
              >
                <svg
                  class="w-6 h-6 text-white"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"
                  ></path>
                </svg>
              </div>
              <div>
                <p class="text-sm text-gray-600">{t.contactInfo.email}</p>
                <p
                  class="text-lg font-semibold text-[var(--color-primary)] hover:text-[var(--color-primary-hover)] transition-colors select-all"
                >
                  contact@abcgourmet.fr
                </p>
              </div>
            </div>

            <!-- Téléphone -->
            <div class="flex items-center gap-4">
              <div
                class="w-12 h-12 bg-[var(--color-primary)] rounded-full flex items-center justify-center"
              >
                <svg
                  class="w-6 h-6 text-white"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z"
                  ></path>
                </svg>
              </div>
              <div>
                <p class="text-sm text-gray-600">{t.contactInfo.phone}</p>
                <p
                  class="text-lg font-semibold text-[var(--color-primary)] hover:text-[var(--color-primary-hover)] transition-colors select-all"
                >
                  +33 6 85 05 73 11
                </p>
              </div>
            </div>

            <!-- Réseaux sociaux -->
            <div class="pt-6">
              <p class="text-lg font-semibold mb-4 text-gray-800">
                {t.contactInfo.followUs}
              </p>
              <div class="flex gap-4">
                <a
                  href="https://linkedin.com/company/abc-gourmet"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="w-12 h-12 bg-[#0077B5] rounded-full flex items-center justify-center hover:scale-110 transition-transform"
                >
                  <svg
                    class="w-6 h-6 text-white"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 12.92 11.24V10.13H10.13V18.5H12.92V13.57C12.92 12.8 13.54 12.17 14.31 12.17A1.4 1.4 0 0 1 15.71 13.57V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19A1.69 1.69 0 0 0 5.19 6.88C5.19 7.81 5.95 8.56 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z"
                    ></path>
                  </svg>
                </a>
                <a
                  href="https://instagram.com/abcgourmet"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="w-12 h-12 bg-gradient-to-r from-[#E4405F] to-[#5851DB] rounded-full flex items-center justify-center hover:scale-110 transition-transform"
                >
                  <svg
                    class="w-6 h-6 text-white"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"
                    ></path>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulaire de contact -->
        <div>
          <h2 class="text-3xl font-bold mb-4 text-[var(--color-primary)]">
            {t.formTitle}
          </h2>
          <p class="text-gray-600 mb-8">{t.formSubtitle}</p>

          <form
            action="/api/contact"
            method="POST"
            class="space-y-6"
            id="contact-form"
          >
            <!-- Nom -->
            <div>
              <label
                for="name"
                class="block text-sm font-medium text-gray-700 mb-2"
              >
                {t.form.name}
              </label>
              <input
                type="text"
                id="name"
                name="name"
                required
                placeholder={t.form.namePlaceholder}
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors"
              />
            </div>

            <!-- Email -->
            <div>
              <label
                for="email"
                class="block text-sm font-medium text-gray-700 mb-2"
              >
                {t.form.email}
              </label>
              <input
                type="email"
                id="email"
                name="email"
                required
                placeholder={t.form.emailPlaceholder}
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors"
              />
            </div>

            <!-- Entreprise -->
            <div>
              <label
                for="company"
                class="block text-sm font-medium text-gray-700 mb-2"
              >
                {t.form.company}
              </label>
              <input
                type="text"
                id="company"
                name="company"
                placeholder={t.form.companyPlaceholder}
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors"
              />
            </div>

            <!-- Sujet -->
            <div>
              <label
                for="subject"
                class="block text-sm font-medium text-gray-700 mb-2"
              >
                {t.form.subject}
              </label>
              <input
                type="text"
                id="subject"
                name="subject"
                required
                placeholder={t.form.subjectPlaceholder}
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors"
              />
            </div>

            <!-- Message -->
            <div>
              <label
                for="message"
                class="block text-sm font-medium text-gray-700 mb-2"
              >
                {t.form.message}
              </label>
              <textarea
                id="message"
                name="message"
                required
                rows="5"
                placeholder={t.form.messagePlaceholder}
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors resize-vertical"
              ></textarea>
            </div>

            <!-- Bouton d'envoi -->
            <div>
              <button
                type="submit"
                class="w-full bg-[var(--color-primary)] text-white font-semibold px-8 py-4 rounded-lg hover:bg-[var(--color-primary-hover)] hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl"
              >
                {t.form.send}
              </button>
              <p class="text-sm text-gray-500 mt-2">{t.form.required}</p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Section avec carte ou informations supplémentaires -->
  <section class="py-16 bg-gray-50">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <h3 class="text-2xl font-bold mb-6 text-[var(--color-primary)]">
        {
          lang === "fr"
            ? "Basés en France, actifs à l'international"
            : lang === "en"
              ? "Based in France, active internationally"
              : "Mit Sitz in Frankreich, international tätig"
        }
      </h3>
      <p class="text-gray-600 text-lg leading-relaxed">
        {
          lang === "fr"
            ? "Notre expertise s'étend sur plus de 25 ans d'expérience dans le secteur alimentaire en France et à l'export. Nous parlons 4 langues et sommes agréés BPI, BCI et Business France."
            : lang === "en"
              ? "Our expertise spans over 25 years of experience in the food sector in France and for export. We speak 4 languages and are accredited BPI, BCI and Business France."
              : "Unsere Expertise erstreckt sich über mehr als 25 Jahre Erfahrung im Lebensmittelsektor in Frankreich und für den Export. Wir sprechen 4 Sprachen und sind von BPI, BCI und Business France akkreditiert."
        }
      </p>
    </div>
  </section>
</Layout>

<script>
  document.addEventListener("astro:page-load", function () {
    const form = document.getElementById(
      "contact-form"
    ) as HTMLFormElement | null;

    if (form) {
      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        const submitButton = form.querySelector(
          'button[type="submit"]'
        ) as HTMLButtonElement;
        const originalText = submitButton.textContent;

        // Désactiver le bouton et changer le texte
        submitButton.disabled = true;
        submitButton.textContent = "Envoi en cours...";

        try {
          const formData = new FormData(form);

          // Ici vous pourriez ajouter l'envoi vers un service comme Netlify Forms
          // ou un endpoint API personnalisé

          // Simulation d'envoi
          await new Promise((resolve) => setTimeout(resolve, 1000));

          // Afficher un message de succès
          const successMessage = document.createElement("div");
          successMessage.className =
            "bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mt-4";
          successMessage.textContent =
            "Message envoyé avec succès ! Nous vous recontacterons rapidement.";

          form.appendChild(successMessage);
          form.reset();

          // Supprimer le message après 5 secondes
          setTimeout(() => {
            successMessage.remove();
          }, 5000);
        } catch (error) {
          // Afficher un message d'erreur
          const errorMessage = document.createElement("div");
          errorMessage.className =
            "bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mt-4";
          errorMessage.textContent =
            "Erreur lors de l'envoi. Veuillez réessayer ou nous contacter directement.";

          form.appendChild(errorMessage);

          setTimeout(() => {
            errorMessage.remove();
          }, 5000);
        } finally {
          // Réactiver le bouton
          submitButton.disabled = false;
          submitButton.textContent = originalText;
        }
      });
    }
  });
</script>